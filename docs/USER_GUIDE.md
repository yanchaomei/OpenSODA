# OpenSource Copilot 用户指南

> 本指南帮助您快速上手 OpenSource Copilot，了解所有功能并高效使用。

---

## 目录

1. [快速开始](#1-快速开始)
2. [核心功能](#2-核心功能)
3. [使用技巧](#3-使用技巧)
4. [理解分析报告](#4-理解分析报告)
5. [常见问题](#5-常见问题)
6. [故障排除](#6-故障排除)

---

## 1. 快速开始

### 1.1 访问方式

**在线体验（推荐）**:
```
https://opensource-copilot.vercel.app
```

**本地部署**:
```bash
# 克隆项目
git clone https://github.com/yanchaomei/OpenSODA.git
cd OpenSODA

# 配置环境变量
cp .env.example .env
# 编辑 .env，填入 OPENAI_API_KEY

# Docker 一键启动
docker-compose up -d

# 访问
# 前端: http://localhost:3000
# 后端: http://localhost:8001/docs
```

### 1.2 第一次对话

打开应用后，在对话框中输入：

```
分析一下 apache/dubbo 的健康状况
```

等待几秒，您将看到：
1. Agent 的思考过程（实时展示）
2. 工具调用状态
3. 完整的分析报告

### 1.3 界面概览

```
┌─────────────────────────────────────────────────────────────────┐
│  🤖 OpenSource Copilot                                         │
├──────────────┬──────────────────────────────────────────────────┤
│              │                                                  │
│  📊 仪表盘   │     [主要内容区域]                               │
│              │                                                  │
│  💬 智能对话 │     根据选择的功能显示不同内容：                 │
│              │     - 对话界面                                   │
│  🔍 项目分析 │     - 分析报告                                   │
│              │     - 对比结果                                   │
│  ⚖️ 项目对比 │     - 监控面板                                   │
│              │                                                  │
│  📜 历史记录 │                                                  │
│              │                                                  │
│  🔔 项目监控 │                                                  │
│              │                                                  │
└──────────────┴──────────────────────────────────────────────────┘
```

---

## 2. 核心功能

### 2.1 智能对话 💬

**功能说明**: 用自然语言与 AI Agent 对话，获取项目分析、问题诊断和建议。

**使用方法**:
1. 点击左侧菜单「智能对话」
2. 在输入框中输入问题
3. 等待 Agent 分析并回复

**示例问题**:

| 场景 | 示例问题 |
|------|----------|
| 健康分析 | "分析 vuejs/vue 的健康状况" |
| 问题诊断 | "kubernetes 有什么问题需要关注？" |
| 获取建议 | "如何提升我的开源项目活跃度？" |
| 对比分析 | "对比 React 和 Vue 的社区健康度" |
| 指标查询 | "apache/dubbo 的 OpenRank 是多少？" |
| 趋势分析 | "tensorflow 的活跃度趋势如何？" |

**思维链展示**:

对话过程中，您可以实时看到 Agent 的思考过程：

```
🤔 正在思考...
🔧 调用工具: 分析仓库健康度
   └─ 参数: {"repo": "apache/dubbo"}
✅ 工具返回 (2.3s)
🔧 调用工具: 诊断问题
   └─ 参数: {"repo": "apache/dubbo"}
✅ 工具返回 (1.5s)
💬 生成回复...
```

### 2.2 项目分析 🔍

**功能说明**: 获取项目的完整健康度报告，包含四维度评分、指标详情、风险预警和改进建议。

**使用方法**:
1. 点击「项目分析」
2. 输入仓库名称（格式: owner/repo）
3. 点击「开始分析」

**报告内容**:

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 健康度报告                                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  总评分: 70.2 / 100  [🟢 良好]                                  │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  四维度评分                                              │   │
│  │                                                          │   │
│  │  🔥 活跃度    ████████████░░░░░░░░   64/100              │   │
│  │  👥 社区      ███████████░░░░░░░░░   55/100              │   │
│  │  🔧 维护      ███████████████████░   97/100              │   │
│  │  📈 增长      ████████████░░░░░░░░   64/100              │   │
│  │                                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  📈 关键指标                                                    │
│  ├─ OpenRank: 40.05                                            │
│  ├─ 活跃度: 23.5                                               │
│  ├─ 贡献者: 856 人                                             │
│  └─ 巴士因子: 16                                               │
│                                                                 │
│  ⚠️ 风险预警                                                    │
│  └─ 暂无严重风险                                               │
│                                                                 │
│  💡 改进建议                                                    │
│  ├─ 增加社区活动吸引新贡献者                                   │
│  └─ 完善新手入门文档                                           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 2.3 项目对比 ⚖️

**功能说明**: 同时对比多个项目的健康度，找出最佳实践或识别差距。

**使用方法**:
1. 点击「项目对比」
2. 输入 2-5 个仓库名称
3. 点击「开始对比」

**对比维度**:
- 健康度总分
- 四维度分数
- 关键指标（OpenRank、活跃度、巴士因子等）
- 趋势走向

### 2.4 项目监控 🔔

**功能说明**: 添加项目到监控列表，当健康度变化或触发风险阈值时收到提醒。

**监控功能**:
- 周期性健康度检查
- 巴士因子预警
- 活跃度下降提醒
- 自定义阈值设置

### 2.5 历史记录 📜

**功能说明**: 查看过去的分析记录，对比项目的历史变化。

**功能特点**:
- 自动保存分析结果
- 支持搜索和筛选
- 可导出历史报告

---

## 3. 使用技巧

### 3.1 有效提问方式

**✅ 好的提问**:
```
"分析 apache/dubbo 的健康状况，重点关注社区活跃度和巴士因子"
"对比 Vue 和 React 的维护响应速度"
"kubernetes 最近3个月的活跃度趋势如何？"
```

**❌ 不好的提问**:
```
"分析项目"  ← 缺少具体项目名
"好不好"    ← 问题太模糊
"全部"      ← 范围太大
```

### 3.2 仓库名称格式

标准格式：`owner/repo`

```
✅ apache/dubbo
✅ vuejs/vue
✅ kubernetes/kubernetes
✅ facebook/react

❌ dubbo
❌ https://github.com/apache/dubbo
❌ apache/dubbo.git
```

### 3.3 追问技巧

利用上下文进行追问，无需重复说明项目：

```
用户: 分析 dubbo 的健康状况
AI: [返回分析报告]

用户: 有什么问题需要关注吗？      ← AI 知道是问 dubbo
AI: [返回问题诊断]

用户: 给我一些改进建议            ← AI 继续针对 dubbo
AI: [返回改进建议]
```

### 3.4 批量分析

在对话中可以一次分析多个项目：

```
用户: 对比 React、Vue、Angular 的健康状况
AI: [返回三个项目的对比分析]
```

---

## 4. 理解分析报告

### 4.1 健康度评分解读

| 分数范围 | 等级 | 含义 |
|----------|------|------|
| 75-100 | 🟢 优秀 | 项目非常健康，可放心使用和贡献 |
| 60-74 | 🟢 良好 | 项目健康，有持续维护 |
| 45-59 | 🟡 一般 | 项目基本健康，存在改进空间 |
| 30-44 | 🟠 需关注 | 存在潜在风险，需要关注 |
| 0-29 | 🔴 风险 | 项目可能停滞或有严重问题 |

### 4.2 四维度详解

**🔥 活跃度 (Activity)**
- 衡量项目当前的活跃程度
- 基于 OpenRank 和 Activity 指标
- 高分 = 持续有开发活动

**👥 社区健康 (Community)**
- 衡量社区的可持续性
- 重点关注巴士因子
- 高分 = 社区多元、风险分散

**🔧 维护响应 (Maintenance)**
- 衡量维护者的响应效率
- 基于 PR 合并率和 Issue 响应时间
- 高分 = 响应迅速、处理及时

**📈 增长趋势 (Growth)**
- 衡量项目的发展势头
- 基于新贡献者和指标趋势
- 高分 = 持续增长、前景良好

### 4.3 关键指标说明

| 指标 | 含义 | 参考范围 |
|------|------|----------|
| OpenRank | 开源影响力排名 | >50 顶级, 20-50 知名, <20 一般 |
| Activity | 月活跃度 | >20 高, 10-20 中, <10 低 |
| Bus Factor | 巴士因子 | >5 安全, 3-5 关注, <3 危险 |
| Participants | 月参与者 | 越多越好 |
| New Contributors | 新贡献者 | 持续增长为佳 |

### 4.4 风险等级说明

| 等级 | 触发条件 | 建议行动 |
|------|----------|----------|
| 🔴 高风险 | 巴士因子 < 3 | 立即评估依赖，考虑替代方案 |
| 🟡 中风险 | 活跃度连续3月下降 | 关注后续发展，准备备选 |
| 🟢 低风险 | OpenRank < 5 | 了解情况，保持关注 |

---

## 5. 常见问题

### Q1: 支持哪些代码托管平台？

**A**: 目前主要支持 GitHub。Gitee 和 GitLab 支持正在开发中。

### Q2: 分析结果多久更新一次？

**A**: OpenDigger 数据每月更新，所以指标数据是月度粒度。每次分析都会获取最新可用数据。

### Q3: 为什么有些项目没有数据？

**A**: 可能的原因：
- 项目太新，OpenDigger 还未收录
- 项目名称输入错误
- 项目是私有仓库

### Q4: 健康度评分的算法是什么？

**A**: 我们使用多维度加权模型：
```
总分 = 0.30×活跃度 + 0.25×社区 + 0.25×维护 + 0.20×增长
```
详见 [技术深度文档](./TECHNICAL_DEEPDIVE.md)

### Q5: 可以分析私有仓库吗？

**A**: 目前不支持。OpenDigger 只收录公开仓库的数据。

### Q6: 分析结果可以导出吗？

**A**: 支持导出为：
- Markdown 格式
- JSON 格式
- PDF 格式（即将支持）

### Q7: 如何理解巴士因子？

**A**: 巴士因子（Bus Factor）指的是"如果几个核心贡献者同时离开，项目会受到严重影响"。数值越高，说明知识和责任分布越分散，项目越健康。

### Q8: 为什么我的项目评分不高？

**A**: 低评分可能的原因：
- OpenRank 值较低（需要更多社区协作）
- 巴士因子低（核心贡献者太少）
- 活跃度下降（最近提交减少）
- PR/Issue 响应慢

### Q9: 如何提升项目健康度？

**A**: 常见建议：
1. 培养更多核心贡献者（提升巴士因子）
2. 完善贡献者指南（吸引新贡献者）
3. 定期社区活动（提升活跃度）
4. 及时响应 PR 和 Issue（提升维护响应度）

### Q10: Agent 调用了哪些工具？

**A**: 11 个专业工具：

| 工具 | 功能 |
|------|------|
| analyze_repo_health | 全面健康分析 |
| diagnose_repo_issues | 问题诊断 |
| get_improvement_suggestions | 改进建议 |
| get_repo_openrank | OpenRank 查询 |
| get_repo_health_metrics | 健康指标 |
| get_repo_contributors_info | 贡献者信息 |
| get_repo_activity_trend | 活跃度趋势 |
| get_github_repo_info | GitHub 信息 |
| get_github_contributors | GitHub 贡献者 |
| find_good_first_issues | 新手 Issue |
| search_opensource_knowledge | 知识库检索 |

---

## 6. 故障排除

### 问题：页面加载缓慢

**解决方案**:
1. 检查网络连接
2. 尝试刷新页面
3. 清除浏览器缓存

### 问题：分析超时

**解决方案**:
1. 检查仓库名称是否正确
2. 等待几秒后重试
3. 尝试分析其他项目确认服务是否正常

### 问题：数据显示异常

**解决方案**:
1. 刷新页面
2. 清除本地缓存
3. 使用无痕模式尝试

### 问题：思维链不显示

**解决方案**:
1. 检查浏览器是否支持 SSE
2. 尝试使用 Chrome 或 Firefox
3. 禁用可能影响连接的浏览器扩展

### 联系支持

如果问题持续，请：
1. 查看 [GitHub Issues](https://github.com/yanchaomei/OpenSODA/issues)
2. 提交新 Issue 描述问题
3. 附上错误信息和复现步骤

---

## 更新日志

- **v1.0.0** (2026-01): 首次发布
  - 智能对话功能
  - 项目健康分析
  - 项目对比
  - 历史记录

---

*文档版本: v1.0 | 最后更新: 2026-01-20*

